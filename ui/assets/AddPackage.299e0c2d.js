var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;"undefined"!=typeof require&&require;import{a as o,s as r}from"./staticTools.84335405.js";import{c as i}from"./verificationRules.43272891.js";import{A as s}from"./api_systemManagement.1f6cc404.js";import{n}from"./index.851f4377.js";import"./vendor.194c4086.js";import"./index.dfdb83b1.js";import"./bus.d56574c1.js";const l={};var f=n({data(){const e=(e,t,a)=>{if(!t)return a();try{JSON.parse(t);return a()}catch(o){return a(new Error(this.$t("InstallerPackage.qingjiancha-JSON-m")))}};return{addPackageVisible:!1,formInfo:{path:"/opt/csu_packages"},formInfoRules:{package_name:[this.requiredRules("osUser")],path:[this.requiredRules("rootPath"),{required:!0,validator:i,trigger:"blur"}],file:[this.requiredRules("osUser")],version:[this.requiredRules("osUser")],settings:[{required:!1,validator:e,trigger:"blur"}],conf_init:[{required:!1,validator:e,trigger:"blur"}]}}},methods:{submit(){this.$refs.formInfo.validate((i=>{if(i){const i=this.formInfo,{settings:n,conf_init:l}=i,f=((o,r)=>{var i={};for(var s in o)t.call(o,s)&&r.indexOf(s)<0&&(i[s]=o[s]);if(null!=o&&e)for(var s of e(o))r.indexOf(s)<0&&a.call(o,s)&&(i[s]=o[s]);return i})(i,["settings","conf_init"]);let c=Object.assign({},f);c.settings=n?JSON.parse(n):{},c.conf_init=l?JSON.parse(l):{};const d=o(".addPackageDialog .el-dialog");s.addCsuPackage(c).then((e=>{this.closeDialog(),d.close(),r(this.$t("addOrModifyPoolList.tianjiachenggong"))}),(e=>{d.close()}))}}))},closeDialog(){this.addPackageVisible=!1,this.$emit("update:isShow",this.addPackageVisible)},requiredRules(e,t=this.$t("addOrModifyPgHba.qingshuru-neirong",[e]),a="blur"){return{required:!0,message:t,trigger:a}}},mounted(){},props:["is-show"],created(){this.addPackageVisible=this.$props.isShow}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"addPackageDialog",attrs:{"append-to-body":!0,title:e.$t("InstallerPackage.anzhuang-chengxubao"),visible:e.addPackageVisible,"close-on-click-modal":!1},on:{close:e.closeDialog,"update:visible":function(t){e.addPackageVisible=t}}},[a("el-form",{ref:"formInfo",attrs:{model:e.formInfo,rules:e.formInfoRules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"PackageName",prop:"package_name"}},[a("el-input",{attrs:{placeholder:e.$t("addOrModifyPgHba.qingshuru-neirong",["PackageName"])},model:{value:e.formInfo.package_name,callback:function(t){e.$set(e.formInfo,"package_name",t)},expression:"formInfo.package_name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"Path",prop:"path"}},[a("el-input",{attrs:{placeholder:e.$t("addOrModifyPgHba.qingshuru-neirong",["Path"])},model:{value:e.formInfo.path,callback:function(t){e.$set(e.formInfo,"path",t)},expression:"formInfo.path"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"File",prop:"file"}},[a("el-input",{attrs:{placeholder:e.$t("addOrModifyPgHba.qingshuru-neirong",["File"])},model:{value:e.formInfo.file,callback:function(t){e.$set(e.formInfo,"file",t)},expression:"formInfo.file"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"Version",prop:"version"}},[a("el-input",{attrs:{placeholder:e.$t("addOrModifyPgHba.qingshuru-neirong",["Version"])},model:{value:e.formInfo.version,callback:function(t){e.$set(e.formInfo,"version",t)},expression:"formInfo.version"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"setting-class",attrs:{label:"Settings",prop:"settings"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:e.$t("addOrModifyPgHba.qingshuru-neirong",["Settings"])},model:{value:e.formInfo.settings,callback:function(t){e.$set(e.formInfo,"settings",t)},expression:"formInfo.settings"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"conf_init-class",attrs:{label:"ConfInit",prop:"conf_init"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:e.$t("addOrModifyPgHba.qingshuru-neirong",["ConfInit"])},model:{value:e.formInfo.conf_init,callback:function(t){e.$set(e.formInfo,"conf_init",t)},expression:"formInfo.conf_init"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("index.qu-xiao")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("defineDatabasePage.ti-jiao")))])],1)],1)}),[],!1,c,"4a6d3ac2",null,null);function c(e){for(let t in l)this[t]=l[t]}var d=function(){return f.exports}();export{d as default};
