var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;"undefined"!=typeof require&&require;import{A as o}from"./api_user.0ee83d22.js";import{n as r}from"./index.851f4377.js";import"./index.dfdb83b1.js";import"./vendor.194c4086.js";import"./bus.d56574c1.js";const i={};var s=r({name:"",data:()=>({form:{filter:"",page_num:1,page_size:10},changeShow:!0,AgentJournalform:{},AgentJournalformRules:{},cities:[],tableLoading:!1,tableData:[],totalCount:0,modelAgentJournalShow:!1}),components:{},watch:{"form.filter"(e,t){e!=t&&""!=e&&(this.needToFirstPage=!0)}},methods:{changeJournal(e){const t=this;t.AgentJournalform=Object.assign({},e),t.$nextTick((()=>{t.$emit("btnHidden")})),t.modelAgentJournalShow=!0},saveAgentJournal(){const e=this,t={level_name:e.AgentJournalform.level_name,log_type:e.AgentJournalform.log_type,ip:e.AgentJournalform.ip};e.tableLoading=!0,o.setAgentLogLevel(t).then((function(t){e.tableLoading=!1,e.modelAgentJournalShow=!1,e.$message({type:"success",message:e.$t("baseInfo.xiugai-chenggong")}),e.AgentJournalList()}),(function(t){e.tableLoading=!1}))},AgentJournalList(){const e=this;this.needToFirstPage&&(this.form.page_num=1),1==this.form.page_num&&(this.totalCount=0);const r=((e,o)=>{for(var r in o||(o={}))a.call(o,r)&&l(e,r,o[r]);if(t)for(var r of t(o))n.call(o,r)&&l(e,r,o[r]);return e})({},e.form);this.tableLoading=!0,o.getAgentLogLevelList(r).then((function(t){e.tableData=t.rows,e.tableLoading=!1,e.needToFirstPage=!1,e.totalCount=t.total}),(function(t){e.tableLoading=!1}))},handleSizeChange(e){this.form.page_size=e,this.needToFirstPage=!0,this.AgentJournalList()},handleCurrentChange(e){this.form.page_num=e,this.AgentJournalList()}},created(){const e=this;let t="",a=window.location.href.split("?")[1],n=new URLSearchParams(a);n.has("hidmenu")&&(t=n.get("hidmenu"),t.indexOf("edit")&&(e.changeShow=!1)),this.AgentJournalList()}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"warp"},[a("div",{staticClass:"filter"},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{margin:"0"},attrs:{inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("Public.question"),placement:"bottom-start"}},[a("el-input",{attrs:{placeholder:e.$t("AgentjournalManage.chaxun-de-jiqi")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.AgentJournalList(t)}},model:{value:e.form.filter,callback:function(t){e.$set(e.form,"filter",t)},expression:"form.filter"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.AgentJournalList}},[e._v(e._s(e.$t("dbList.shou-suo")))])],1)],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table"},[a("el-table",{staticStyle:{width:"100%",overflow:"auto"},attrs:{data:e.tableData,size:"medium",border:""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"ip",label:e.$t("AgentjournalManage.agent-jiqi-ip"),"min-width":"150"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"log_type",label:e.$t("JournalManage.rizhi-fenlei"),"min-width":"150"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"level_name",label:e.$t("JournalManage.rizhi-jibie"),"min-width":"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.changeShow?a("a",{staticStyle:{"text-decoration":"underline",cursor:"pointer"},on:{click:function(a){return e.changeJournal(t.row)}}},[e._v(e._s(t.row.level_name))]):a("a",[e._v(e._s(t.row.level_name))])]}}])})],1),a("div",{staticClass:"table-footer--APP",staticStyle:{"margin-top":"10px"},attrs:{slot:"append"},slot:"append"},[a("el-pagination",{attrs:{"current-page":e.form.page_num,"page-sizes":[10,20,30,40,50,60,70,80,90],"page-size":e.form.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:e.$t("JournalManage.xiugai-rizhi-jibie"),"append-to-body":!0,visible:e.modelAgentJournalShow,width:"60%"},on:{"update:visible":function(t){e.modelAgentJournalShow=t}}},[a("el-form",{ref:"Journalform",attrs:{model:e.AgentJournalform,rules:e.AgentJournalformRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e.$t("JournalManage.rizhi-fenlei"),prop:"log_type"}},[a("el-input",{attrs:{type:"text",placeholder:e.$t("JournalManage.qing-shuru-rizhi-fenlei"),disabled:""},model:{value:e.AgentJournalform.log_type,callback:function(t){e.$set(e.AgentJournalform,"log_type",t)},expression:"AgentJournalform.log_type"}})],1),a("el-form-item",{attrs:{label:e.$t("JournalManage.rizhi-jibie"),prop:"remark"}},[a("el-select",{attrs:{filterable:"",placeholder:e.$t("JournalManage.qing-beifen-de-zhuji")},model:{value:e.AgentJournalform.level_name,callback:function(t){e.$set(e.AgentJournalform,"level_name",t)},expression:"AgentJournalform.level_name"}},[a("el-option",{attrs:{label:"critical",value:"critical"}}),a("el-option",{attrs:{label:"error",value:"error"}}),a("el-option",{attrs:{label:"warn",value:"warn"}}),a("el-option",{attrs:{label:"info",value:"info"}}),a("el-option",{attrs:{label:"debug",value:"debug"}})],1)],1)],1),a("div",{staticStyle:{overflow:"hidden"}},[a("el-button",{staticClass:"edit",staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.saveAgentJournal()}}},[e._v(e._s(e.$t("licManager.bao-cun")))])],1)],1)],1)])}),[],!1,u,"2eb07db6",null,null);function u(e){for(let t in i)this[t]=i[t]}var g=function(){return s.exports}();export{g as default};
