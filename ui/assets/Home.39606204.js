import{_ as e,n as t}from"./index.8ae6cd07.js";import{b as n}from"./bus.d56574c1.js";import{A as s}from"./api_user.0ee83d22.js";import"./vendor.194c4086.js";import"./index.dfdb83b1.js";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"container"},[e.viewframeshow?n("el-col",{staticClass:"topbar-wrap",attrs:{span:24}},["#"!=e.returnurl?n("el-link",{attrs:{href:e.returnurl,target:"_self"}},[n("span",{staticStyle:{color:"#fff"}},[e._v(e._s(e.$t("index.fan-hui")))])]):e._e(),n("div",{staticClass:"topbar-logo"},[n("a",{attrs:{href:"/"}},[n("img",{attrs:{src:"/logo/company.png"}})])]),n("div",{staticClass:"topbar-account topbar-btn"},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link userinfo-inner"},[n("i",{staticClass:"iconfont icon-user"}),e._v(" "+e._s(e.nickname)+" "),n("i",{staticClass:"el-icon-caret-bottom",staticStyle:{"font-size":"12px"}})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请在配置文件中修改，然后重启服务",placement:"left"}},[n("div",[n("el-dropdown-item",{attrs:{disabled:""},nativeOn:{click:function(t){return e.modifyUserAccount()}}},[e._v(e._s(e.$t("index.xiu-gai")))])],1)]),n("el-dropdown-item",{nativeOn:{click:function(t){return e.logout(t)}}},[e._v(e._s(e.$t("index.tui-chu-deng-lu")))])],1)],1),n("span",{staticClass:"language_cls",on:{click:e.ChineseFunc}},[e._v(" "+e._s(e.$t("index.zhong-wen")))]),e._v("|"),n("span",{staticClass:"language_cls",on:{click:e.EnglishFunc}},[e._v(e._s(e.$t("index.ying-wen"))+" ")])],1),n("div",{staticClass:"topbar-time"},[n("span",[e._v(e._s(e.$t("index.dang-qian-shi-jian")))]),n("span",[e._v(e._s(e._f("formatDate")(e.date)))])]),n("div",{staticClass:"topbar-product-logo"},[n("img",{attrs:{src:"/logo/clup.png"}}),n("span",{staticStyle:{"font-size":"16px",color:"#fff"}},[e._v(e._s(e.$t("index.titleMessage")))])])],1):e._e(),n("el-dialog",{attrs:{title:e.$t("index.xiu-gai"),"append-to-body":!0,visible:e.modelAddUserShow,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(t){e.modelAddUserShow=t}}},[e.modelAddUserShow?n("modify-user",{attrs:{"change-type":e.ChangeType,"user-data":e.changeUserData},on:{"close-form":function(t){e.modelAddUserShow=!1},"finish-action":e.Changelogout}}):e._e()],1),n("el-col",{staticClass:"main",attrs:{span:24}},[e.viewframeshow?n("aside",{class:{showSidebar:!e.collapsed}},[n("div",{staticClass:"menu-toggle",on:{click:function(t){return t.preventDefault(),e.collapse(t)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"iconfont el-icon-menufold"}),n("i",{directives:[{name:"show",rawName:"v-show",value:e.collapsed,expression:"collapsed"}],staticClass:"iconfont el-icon-menuunfold"})]),n("el-menu",{attrs:{"default-active":e.defaultActiveIndex,router:"",collapse:e.collapsed},on:{select:e.handleSelect}},[e._l(e.routerlist,(function(t,s){return[t.menuShow&&!t.leaf?n("el-submenu",{key:s,attrs:{index:s+""}},[n("template",{slot:"title"},[n("i",{class:t.iconCls}),n("span",{attrs:{slot:"title",title:e.munuI18nFunc(t.name)},slot:"title"},[e._v(e._s(e.munuI18nFunc(t.name)))])]),e._l(t.children,(function(t){return[t.menuShow?n("el-menu-item",{key:t.path,class:t.path.includes(e.$route.path)?"is-active":"",attrs:{disabled:!!t.isDisable,index:t.path}},[n("i",{class:t.iconCls}),n("span",{attrs:{slot:"title",title:e.munuI18nFunc(t.name)},slot:"title"},[e._v(e._s(e.munuI18nFunc(t.name)))])]):e._e()]}))],2):t.menuShow&&t.leaf&&t.children&&t.children.length?n("el-menu-item",{key:s,class:e.$route.path==t.children[0].path?"is-active":"",attrs:{index:t.children[0].path}},[n("i",{class:t.iconCls}),n("span",{attrs:{slot:"title",title:e.munuI18nFunc(t.children[0].name)},slot:"title"},[e._v(e._s(e.munuI18nFunc(t.children[0].name)))])]):e._e()]}))],2)],1):e._e(),n("section",{staticClass:"content-container"},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-col",{staticClass:"content-wrapper",attrs:{span:24}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{on:{btnHidden:e.hidmenufunc}})],1)],1)],1)])])],1)},l=[];let o=function(e){return e<10?"0"+e:e},i=window.location.href.split("?")[1],c=new URLSearchParams(i);c.has("bgmode")&&2==c.get("bgmode")&&e((()=>Promise.resolve({})),["assets/hotdb.35e5b3b9.css"]);const r={};var u=t({name:"home",created(){console.log("static web href="+window.location.href);let e=window.location.href.split("?")[1],t=new URLSearchParams(e);const s=this;if(t.has("token")){t.has("pattern");let e=t.get("token");console.log("static web token="+e),document.cookie="session_id="+e,s.viewframeshow=!1}if(s.routerlist=g_memu_list.routers,s.returnurl=g_memu_list.returnurl,n.$on("setNickName",(e=>{s.nickname=e})),n.$on("goto",(e=>{"/login"===e&&localStorage.removeItem("access-user"),s.$router.push(e)})),t.has("language"))switch(t.get("language")){case"0":this.$nextTick((()=>{let e=document.getElementsByClassName("language_cls");for(let t=0;t<e.length;t++)e[t].style.color="#ddd";e[0].style.color="#0070cc",localStorage.setItem("language_clup","cn"),this.$i18n.locale="cn"}));break;case"1":this.$nextTick((()=>{let e=document.getElementsByClassName("language_cls");for(let t=0;t<e.length;t++)e[t].style.color="#ddd";e[1].style.color="#0070cc",localStorage.setItem("language_clup","en"),this.$i18n.locale="en"}))}else this.$i18n.locale="cn",this.$nextTick((()=>{let e=document.getElementsByClassName("language_cls");for(let t=0;t<e.length;t++)e[t].style.color="#ddd";"en"==localStorage.getItem("language_clup")?(e[1].style.color="#0070cc",localStorage.setItem("language_clup","en"),this.$i18n.locale=localStorage.getItem("language_clup")):(e[0].style.color="#0070cc",localStorage.setItem("language_clup","cn"),this.$i18n.locale="cn")}))},data:()=>({returnurl:"#",defaultActiveIndex:"",nickname:"",collapsed:!1,date:new Date,timer:0,viewframeshow:!0,routerlist:[],modelAddUserShow:!1,changeUserData:{},ChangeType:1,clupBtn:["import","create","distribution","del","standby","active","switch","stop","start","edit","create","restart","change","cancel","kill","cancel","kill","detail","create","import","del","standby","edit","see","offLine","onLine","detail","detail","plan","backup","detail","del","edit","import","del","detail","log","recovery","log","monitor","open","start","edit","del","add","edit","del","see","edit","offLine","edit","host","database","session","lock","modify","move","upgrade","bounce"]}),components:{ModifyUser:()=>e((()=>import("./ModifyUserPassword.1e9a8d48.js")),["assets/ModifyUserPassword.1e9a8d48.js","assets/index.dfdb83b1.js","assets/vendor.194c4086.js","assets/bus.d56574c1.js","assets/index.8ae6cd07.js","assets/index.738ab243.css"])},watch:{$route(e,t){this.defaultActiveIndex=e.path}},filters:{formatDate:function(e){let t=localStorage.getItem("language_clup"),n=new Date,s=n.getFullYear(),a=o(n.getMonth()+1),l=o(n.getDate()),i=o(n.getHours()),c=o(n.getMinutes()),r=o(n.getSeconds());if("cn"==t)return s+"-"+a+"-"+l+" "+i+":"+c+":"+r;{let t=e.toString().indexOf("(");return e.toString().substring(0,t)}}},methods:{hidmenufunc(){let e=this,t=window.location.href.split("?")[1],n=new URLSearchParams(t);if(n.has("hidmenu")){let t=n.get("hidmenu").split(","),s=e.clupBtn.filter((e=>t.indexOf(e)<0));for(let e=0;e<s.length;e++){let t=document.getElementsByClassName(""+s[e]);for(let e=0;e<t.length;e++)t[e].setAttribute("style","display:none")}}},handleSelect(e){this.defaultActiveIndex=e},modifyUserAccount(){console.log("执行了");let e=JSON.parse(localStorage.getItem("access-user"));this.modelAddUserShow=!0,this.changeUserData={user_id:e.username}},collapse:function(){this.collapsed=!this.collapsed},jumpTo(e){this.defaultActiveIndex=e,console.log(e),this.$router.push(e)},logout(){let e=this;this.$confirm(this.$t("index.que-ren-tui-chu"),this.$t("index.ti-shi"),{confirmButtonClass:"el-button--warning",closeOnClickModal:!1}).then((()=>{e.loading=!0,s.logout().then((function(t){e.loading=!1,localStorage.removeItem("access-user"),e.$router.push({path:"/login"})}),(function(t){e.loading=!1,e.$message.error({showClose:!0,message:t.toString(),duration:2e3})})).catch((function(t){e.loading=!1,console.log(t),e.$message.error({showClose:!0,message:e.$t("login.qing-qiu-chu-xian-yi-chang"),duration:2e3})}))})).catch((()=>{}))},Changelogout:function(){const e=this;e.loading=!0,s.logout().then((function(t){e.loading=!1,localStorage.removeItem("access-user"),e.$router.push({path:"/login"})}),(function(t){e.loading=!1,e.$message.error({showClose:!0,message:t.toString(),duration:2e3})})).catch((function(t){e.loading=!1,console.log(t),e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})}))},ChineseFunc(e){this.clearLanguageClass(),e.target.style.color="#0070cc",localStorage.setItem("language_clup","cn"),this.$i18n.locale="cn",location.reload()},EnglishFunc(e){this.clearLanguageClass(),e.target.style.color="#0070cc",localStorage.setItem("language_clup","en"),this.$i18n.locale="en",location.reload()},clearLanguageClass(){let e=document.getElementsByClassName("language_cls");for(let t=0;t<e.length;t++)e[t].style.color="#ddd"},munuI18nFunc(e){return this.$t("menus."+e)?this.$t("menus."+e):e}},mounted:function(){const e=this;this.timer=setInterval((()=>{this.date=new Date}),1e3);let t=localStorage.getItem("access-user");t&&(t=JSON.parse(t),this.nickname=t.nickname||""),this.defaultActiveIndex=this.$router.currentRoute.path;let n=window.location.href.split("?")[1],s=new URLSearchParams(n);if(s.has("hidmenu")){let t=s.get("hidmenu").split(","),n=e.clupBtn.filter((e=>t.indexOf(e)<0));for(let e=0;e<n.length;e++){let t=document.getElementsByClassName(""+n[e]);for(let e=0;e<t.length;e++)t[e].setAttribute("style","display:none")}}},destroyed(){clearInterval(this.timer)}},a,l,!1,d,"89ced552",null,null);function d(e){for(let t in r)this[t]=r[t]}var g=function(){return u.exports}();export{g as default};
