import{a as e}from"./staticTools.84335405.js";import{c as a}from"./verificationRules.43272891.js";import{A as t}from"./api_systemManagement.1f6cc404.js";import{n as o}from"./index.851f4377.js";import"./vendor.194c4086.js";import"./index.dfdb83b1.js";import"./bus.d56574c1.js";const s={};var i=o({data(){return{installerPackageVisible:!1,formInfo:{os_user:"zqpool",root_path:"/home/zqpool"},formInfoRules:{package_id:[{required:!0,message:this.$t("InstallerPackage.qingxuanze-chengxubao"),trigger:"change"}],os_user:[{required:!0,message:this.$t("addOrModifyPgHba.qingshuru-neirong",["os_user"]),trigger:"blur"}],root_path:[{required:!0,message:this.$t("addOrModifyPgHba.qingshuru-neirong",["root_path"]),trigger:"blur"},{required:!0,validator:a,trigger:"blur"}]},packageConfs:[],curVerionOptions:[],choicesAgents:[]}},methods:{submit(){this.$refs.formInfo.validate((a=>{if(a){let a=Object.assign({},this.formInfo);a.host_list=this.choicesAgents;const o=e(".installerPackageDialog .el-dialog");t.installCsuPackage(a).then((e=>{this.closeDialog(),o.close(),this.$emit("openTaskLog",e.task_id)}),(e=>{o.close()}))}}))},getPackageInfo(e=""){return new Promise(((a,o)=>{let s={package_name:e};t.getCsuPackageInfo(s).then((e=>{this.packageConfs=e.rows,this.curVerionOptions=this.packageConfs.map((e=>({package:e.package,package_id:e.package_id}))),a(!0)}),(e=>{o(!0)}))}))},async getInfo(){const a=e(".installerPackageDialog .el-dialog");try{await this.getPackageInfo(),a.close()}catch(t){a.close()}},closeDialog(){this.installerPackageVisible=!1,this.$emit("update:isShow",this.installerPackageVisible)}},mounted(){this.getInfo()},props:["is-show","data-choices"],created(){this.installerPackageVisible=this.$props.isShow,this.choicesAgents=this.$props.dataChoices,this.choicesAgents=this.choicesAgents.map((e=>e.ip))}},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{staticClass:"installerPackageDialog",attrs:{"append-to-body":!0,title:e.$t("InstallerPackage.anzhuang-chengxubao"),visible:e.installerPackageVisible,"close-on-click-modal":!1},on:{close:e.closeDialog,"update:visible":function(a){e.installerPackageVisible=a}}},[t("el-form",{ref:"formInfo",attrs:{model:e.formInfo,rules:e.formInfoRules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("InstallerPackage.xuanze-chengxubao"),prop:"package_id"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("InstallerPackage.qingxuanze-chengxubao")},model:{value:e.formInfo.package_id,callback:function(a){e.$set(e.formInfo,"package_id",a)},expression:"formInfo.package_id"}},e._l(e.curVerionOptions,(function(e){return t("el-option",{key:e.package_id,attrs:{label:e.package,value:e.package_id}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"os_user",prop:"os_user"}},[t("el-input",{attrs:{placeholder:e.$t("addOrModifyPgHba.qingshuru-neirong",["os_user"])},model:{value:e.formInfo.os_user,callback:function(a){e.$set(e.formInfo,"os_user",a)},expression:"formInfo.os_user"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"root_path",prop:"root_path"}},[t("el-input",{attrs:{placeholder:e.$t("addOrModifyPgHba.qingshuru-neirong",["root_path"])},model:{value:e.formInfo.root_path,callback:function(a){e.$set(e.formInfo,"root_path",a)},expression:"formInfo.root_path"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("index.qu-xiao")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("defineDatabasePage.ti-jiao")))])],1)],1)}),[],!1,r,"6852ce0d",null,null);function r(e){for(let a in s)this[a]=s[a]}var l=function(){return i.exports}();export{l as default};
