import{A as e}from"./api_dbManage.0ed831fd.js";import{n as t,D as a}from"./index.8ae6cd07.js";import{b as i,c as r,d as s}from"./verificationRules.bef90446.js";import{f as n,g as o,b as l}from"./staticTools.84335405.js";import"./index.dfdb83b1.js";import"./vendor.194c4086.js";import"./bus.d56574c1.js";const c={};var u=t({name:"baseInfo",data(){return{language:"",loading_pgdata:!1,loadingOsInfo:!1,loading_port:!1,loading_version:!1,os_uid_disabled:!1,os_uid:0,mostCommonlyUsedRow:[],commonlyUsedRow:[],commonlyRow:[],iscanpush:!1,loading:!1,active:0,isValidateName_create:"",curHostOptions:[],pg_bin_path_list:[],memMax:2048,cupMemMax:32,createDbFormVisible:!1,createDbFormRules:{instance_type:[{required:!0,trigger:"change"}],instance_name:[{message:this.$t("defineDatabasePage.qingshuru-shujujku-mingcheng"),trigger:"blur"}],host:[{required:!0,message:this.$t("createDatabasePage.qingxuanze-zhuji-IP"),trigger:"change"}],port:[{required:!0,message:this.$t("createDatabasePage.qingshuru-duankouhao"),trigger:"blur"},{required:!0,validator:i,trigger:"blur"},{type:"number",message:this.$t("defineDatabasePage.duankou-bixuwei-shuzizhi")}],pg_bin_path:[{required:!0,message:this.$t("createDatabasePage.bixu-xuanze-youxiao-raunjianmulu"),trigger:"blur"}],pgdata:[{required:!0,message:this.$t("defineDatabasePage.qingshuru-shuju-mulu"),trigger:"blur"},{required:!0,validator:r,trigger:"blur"},{required:!0,validator:(t,a,i)=>{if(""===a)i(new Error(this.$t("verificationRules.qingshuru-shuji-mulu")));else{if(!this.createDbForm.host)return i(this.$t("createDatabasePage.xuanzezhuji-kechakan-message"));{let t={host:this.createDbForm.host,pgdata:a};this.loading_pgdata=!0,e.checkTheDirIsEmpty(t).then((e=>(this.loading_pgdata=!1,1==e.is_empty?i():0==e.is_empty?i(new Error(this.$t("verificationRules.gaishuju-mulu-m"))):i(new Error(e.err_msg)))),(e=>(this.loading_pgdata=!1,i(new Error(this.$t("verificationRules.jiancha-qingqiu-chucuo"))))))}}},trigger:"submit"}],os_user:[{required:!0,message:this.$t("createDatabasePage.yunxing-shujuku-yonghu-message"),trigger:"blur"}],os_uid:[{required:!0,message:this.$t("createDatabasePage.yunxing-yunhu-UID-message"),trigger:"blur"},{type:"number",message:this.$t("createDatabasePage.UID-bixuwei-zhuzizhi")}],db_user:[{required:!0,message:this.$t("createDatabasePage.HA-guanli-yonghu-message"),trigger:"blur"}],db_pass:[{required:!0,message:this.$t("defineDatabasePage.DB-zhongde-mima-placeholder"),trigger:"blur"}],mem_size:[{required:!0,message:this.$t("createDatabasePage.qingshuru-neicun-daxiao"),trigger:"blur"},{type:"number",message:this.$t("createDatabasePage.neicun-bixuei-shuzizhi")}],conn_cnt:[{required:!0,message:this.$t("createDatabasePage.qingshuru-lianjieshu-daxiao"),trigger:"blur"},{required:!0,validator:(e,t,a)=>{if(""!==t)return t<20||t>1e4?a(new Error(this.$t("createDatabasePage.lianjie-fanwewi"))):a();a(new Error(this.$t("createDatabasePage.qingshuru-lianjieshu")))},trigger:"blur"},{type:"number",message:this.$t("createDatabasePage.lianjieshu-bixuwei-shuzizhi")}],storage_size:[{required:!0,message:this.$t("createDatabasePage.qingxuanze-cunchu-guige"),trigger:"change"}],wal_segsize:[{required:!0,message:this.$t("createPolardbCluster.qingxuanze-wal-wenjian-daxiao"),trigger:"change"}]},createDbForm:{instance_type:"physical",pg_user:"postres",os_user:"pg1922",instance_name:"",port:1922,pgdata:"/data/pg1922"},createDBconfigForm:{},createDBconfigFormList:[],createDBconfigFormDict:{},byteUnitDict:{B:"",kB:"kB",MB:"MB",GB:"GB",TB:"TB"},timeUnitDict:{ms:"ms",s:"s",min:"min",h:"h",d:"d"},createDBconfigFormRules:{},pgUser:"",initCreateOption:[{name:"storage_size",cname:this.$t("createDatabasePage.cunchu-guige"),countType:["10GB","100GB","1TB","2TB","5TB","10TB"],span:12},{name:"wal_segsize",cname:this.$t("createPolardbCluster.wal-wenjian-daxiao"),countType:["16MB","32MB","64MB","128MB","256MB","512MB","1GB","2GB","4GB"],span:6}]}},filters:{filterContent(e,t){let a=[];return 1!==e.state&&a.push("cn"===t?"agent异常":"agent exceptions"),e.mem_size<64&&a.push("cn"===t?"该主机剩余内存小于了所需内存的最小值":"The remaining memory on this host is less than the minimum amount of memory required"),a.join("、")}},watch:{},props:{databaselistData:{required:!0},createType:{required:!0}},mounted(){const t=this;t.language=localStorage.getItem("language_clup"),t.createDbFormRules.os_user.push({required:!0,validator:t.validOsUser,trigger:"blur"}),t.createDbFormRules.port.push({required:!0,validator:t.validDbPort,trigger:"submit"}),t.createDbFormRules.os_uid.push({required:!0,validator:t.validOsUid,trigger:"blur"}),t.createDbFormRules.host.push({required:!0,validator:t.validHost,trigger:"change"}),t.createDbFormRules.pg_bin_path.push({required:!0,validator:t.validPgBinPath,trigger:"change"}),e.getPgFamilyInfo().then((function(e){t.pgUser=e.pg_family_user,t.createDbDialog()}))},methods:{getResource(e){this.createDbForm.pgdata&&this.$refs.createDbForm.validateField("pgdata"),this.createDbForm.pg_bin_path&&this.$refs.createDbForm.validateField("pg_bin_path")},SelectChange(e){this.$refs.createDBconfigForm.validateField(e)},calcUnitValue(e){if(null==e)return 1;if(""===e)return 1;if("B"===e)return 1;if("kB"===e)return 1024;if("MB"===e)return 1048576;if("GB"===e)return 1073741824;if("TB"===e)return 1099511627776;if("ms"===e)return 1;if("s"===e)return 1e3;if("min"===e)return 6e4;if("h"===e)return 36e5;if("d"===e)return 864e5;throw new Error(this.$t("createDatabasePage.wuxiao-danwei")+e)},validateRange(e,t,a){console.log("rule is "),console.log(e);var i=this.createDBconfigFormDict[e.field];if("listen_addresses"!=e.field){if(null==t||""==t)return"archive_command"==e.field?void a():void a(new Error(this.$t("createDatabasePage.bixu-shuru-yigezhi")));if(console.log("itemdata is "),console.log(i),null!=i.min_val||null!=i.max_val){var r=this.createDBconfigForm[e.field].unit,n=1;null!=r?n=this.calcUnitValue(r):r="";var o,l=0;if(3==i.setting_type||4==i.setting_type?(l=parseFloat(t.val),console.log("value="+t.val+",unit="+r+", unitValue="+n),o=t.val):(l=parseFloat(t),o=t,console.log("value="+t+",unit="+r+", unitValue="+n)),isNaN(l))a(new Error(this.$t("createDatabasePage.qingshuru-shuzi")));else{var c=0,u=0,g=!0;"-∞"!=(c=null==i.min_val?"-∞":parseFloat(i.min_val))&&l*n<c&&(g=!1),"∞"!=(u=null==i.max_val?"∞":parseFloat(i.max_val))&&l*n>u&&(g=!1),console.log("minValue="+c+", maxValue="+u),g||a(new Error(this.$t("createDatabasePage.shuru-dezhi")+o+r+this.$t("createDatabasePage.chaoguo-fanwei")+c+", "+u+"]")),a()}}else a()}else s(e,t,a)},retrievePgInitConf(){const t=this;t.loading=!0;let a={version:t.createDbForm.version};e.getInitDbConf(a).then((function(e){t.createDBconfigForm={};let a=e.setting_list;for(let i in a)if(t.createDBconfigFormDict[a[i].setting_name]=a[i],t.createDBconfigFormRules[a[i].setting_name]=[{required:!0,validator:t.validateRange,trigger:"blur"}],3===a[i].setting_type||4===a[i].setting_type){let e=["min_wal_size","max_wal_size","wal_keep_size"],r=a[i].unit,s=Number(a[i].val),o=null;"track_activity_query_size"==a[i].setting_name&&""==a[i].unit&&(r="B"),e.includes(a[i].setting_name)&&(o=n(t.modifyDBConfigFun(a[i].setting_name))),null!=o&&(s=o.value,r=o.unit),t.$set(t.createDBconfigForm,a[i].setting_name,{val:s,unit:r})}else{let e=a[i].val;["wal_keep_segments"].includes(a[i].setting_name)&&(e=t.modifyDBConfigFun(a[i].setting_name)),t.$set(t.createDBconfigForm,a[i].setting_name,e)}a=t.sortData(a),t.mostCommonlyUsedRow=[],t.commonlyUsedRow=[],t.commonlyRow=[];for(let i=0;i<a.length;i++)1==a[i].common_level&&t.mostCommonlyUsedRow.push(a[i]),2==a[i].common_level&&t.commonlyUsedRow.push(a[i]),3==a[i].common_level&&t.commonlyRow.push(a[i]);t.createDBconfigFormList=t.mostCommonlyUsedRow,t.loading=!1}),(function(e){t.loading=!1}))},modifyDBConfigFun(e){let t=o(this.createDbForm.wal_segsize),{value:a,unit:i}=l(this.createDbForm.storage_size),r=o(this.createDbForm.storage_size),s=1024;if("min_wal_size"===e||"max_wal_size"===e){let r,s;10===a&&"GB"===i?(r=Math.floor(o("320MB")/t),s=Math.floor(o("1GB")/t)):100===a&&"GB"===i?(r=Math.floor(o("1GB")/t),s=Math.floor(o("5GB")/t)):(r=Math.floor(o("2GB")/t),s=Math.floor(o("20GB")/t));let n=r>=2?t*r:2*t,l=s>0?t*s:4*t;return l<=n&&(l=4*n),l>=20480&&(l=20480),"min_wal_size"===e?n:l}if("wal_keep_size"===e){let e=r/s,t=o(Number((.1*e/(e/10)**.25).toFixed(2)),"GB");return Math.ceil(t)}if("wal_keep_segments"===e){let e=r/s,a=o(Number((.1*e/(e/10)**.25).toFixed(2)),"GB")/t;return Math.ceil(a)}throw new Error("没有找到对应的参数")},nextfun(){const e=this;switch(e.active){case 0:this.$refs.createDbForm.validate((t=>{t&&(e.active++,e.iscanpush=!0,e.retrievePgInitConf(),e.iscanpush=!1)}));break;case 1:this.$refs.createDBconfigForm.validate((t=>{t&&(e.createDBconfigFormList=e.commonlyUsedRow,e.active++)}));break;case 2:this.$refs.createDBconfigForm.validate((t=>{t&&(e.createDBconfigFormList=e.commonlyRow,e.active++)}))}},lastfun(){const e=this;e.iscanpush=!0,3==e.active?(e.active--,e.createDBconfigFormList=e.commonlyUsedRow):2==e.active?(e.active--,e.createDBconfigFormList=e.mostCommonlyUsedRow):1==e.active&&e.active--,e.iscanpush=!1},validateNameFn(e,t){this.databaselistData.find((t=>t.instance_name===e))?this["isValidateName_"+t]=!0:this["isValidateName_"+t]=!1},validOsUser(t,a,i){const r=this;if(""==r.createDbForm.os_user)return void i();let s={host:r.createDbForm.host,user:a};r.loadingOsInfo=!0,e.checkOsUserExists(s).then((e=>{r.loadingOsInfo=!1,0==e.err_code?0==e.exists?(r.os_uid_disabled=!1,r.createDbForm.create_os_user=!0,r.createDbForm.os_uid&&r.$refs.createDbForm.validateField("os_uid"),i()):(r.os_uid_disabled=!0,r.createDbForm.create_os_user=!1,r.$refs.createDbForm.clearValidate("os_uid"),r.$set(r.createDbForm,"os_uid",e.exists),i()):i(new Error(e.err_msg))}),(function(e){i(new Error(e)),r.loadingOsInfo=!1}))},validDbPort(t,a,i){const r=this;if(""==r.createDbForm.port)return void i();let s={host:r.createDbForm.host,port:r.createDbForm.port};r.loading_port=!0,e.checkPortIsUsed(s).then((e=>{r.loading_port=!1,0==e.err_code?0==e.is_used?i():i(new Error(this.$t("verificationRules.gaiduankou-yibei-m"))):i(new Error(e.err_msg))}),(function(e){return r.loading_port=!1,i(new Error(this.$t("verificationRules.jiancha-qingqiu-chucuo")))}))},validOsUid(t,a,i){const r=this;if(""==r.createDbForm.os_uid)return void i();if(r.os_uid_disabled)return void i();let s={host:r.createDbForm.host,os_uid:a};r.loadingOsInfo=!0,e.checkOsUidExists(s).then((e=>{r.loadingOsInfo=!1,0==e.err_code?0==e.exists||r.os_uid_disabled?i():i(new Error(this.$t("createDatabasePage.yonghu-uid")+a+this.$t("createDatabasePage.yicunzai"))):i(new Error(e.err_msg))}),(function(e){i(new Error(e)),r.loadingOsInfo=!1}))},validHost(t,a,i){const r=this;if(""==r.createDbForm.host)return void i();let s={host:r.createDbForm.host};r.loading_pg_bin_path_list=!0,e.getPgBinPathList(s).then((e=>{r.loading_pg_bin_path_list=!1,r.pg_bin_path_list=e,i()}),(function(e){i(new Error(e)),r.loading_pg_bin_path_list=!1}))},validPgBinPath(t,a,i){const r=this;if(""==r.createDbForm.host)return void i();let s={host:r.createDbForm.host,pg_bin_path:r.createDbForm.pg_bin_path};r.loading_version=!0,e.getPgBinVersion(s).then((e=>{0==e.err_code?(this.$set(r.createDbForm,"version",e.version),i()):i(new Error(e.err_msg)),r.loading_version=!1}),(function(e){r.loading_version=!1,i(new Error(e))}))},sortData:e=>(e.sort((function(e,t){return e.order_id<t.order_id?-1:e.order_id>t.order_id?1:0})),e),createDbDialog:function(){const t=this;this.createDbFormVisible=!0,t.loading=!0,e.getDBHostList().then((function(a){let i="";if(0===a.length)t.$message({type:"warning",message:t.$t("createStreamReplicationCluster.shujuku-suozai-m")});else{t.curHostOptions=a;let e=a.find((e=>e.mem_size>=64&&1===e.state));e&&(i=e.ip,t.memMax=e.mem_size)}e.getPgFamilyInfo().then((function(e){t.createDbForm={instance_type:"physical",host:i,db_user:e.pg_family_user,os_user:e.pg_family_user,wal_segsize:"16MB",storage_size:"10GB"},t.loading=!1}))}),(function(e){t.loading=!1}))},closeDiaLog:function(){this.$emit("close-form")},createDbSubmit:function(){let e=this;!0!==e.isValidateName_create?this.$refs.createDBconfigForm.validate((t=>{t&&(e.loading=!0,e.submitFunc({}))})):e.$message({type:"error",message:this.$t("defineDatabasePage.mingcheng-yibei-shiyong")})},submitFunc(t){const i=this;i.$emit("refresh-form");let r=Object.assign({},i.createDBconfigForm),s=[];for(let e in r)r[e].unit?s.push({setting_name:e,val:r[e].val,unit:r[e].unit}):s.push({setting_name:e,val:r[e]});let n=Object.assign({},this.createDbForm,{setting_list:s});n.db_pass=a.ToDbText(n.db_pass),n.port=Number(n.port),n.db_type=1,n.wal_segsize=o(i.createDbForm.wal_segsize),delete n.storage_size,n=Object.assign({},n,t),e.createDb(n).then((function(e){i.loading=!1,i.$refs.createDbForm.resetFields(),i.createDbFormVisible=!1,i.$emit("close-form"),i.$emit("open-task",e.task_id)}),(function(e){i.loading=!1,i.$emit("down-form")}))}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{overflow:"hidden"},attrs:{"element-loading-text":e.$t("Public.ping-ming-jia-zai-zhong")}},[a("el-steps",{staticStyle:{"margin-bottom":"20px"},attrs:{active:e.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:e.$t("createDatabasePage.xuanze-shujuku")}}),a("el-step",{attrs:{title:e.$t("createDatabasePage.changyong-canshu-peizhi")}}),a("el-step",{attrs:{title:e.$t("createDatabasePage.yiban-canshu-peizhi")}}),a("el-step",{attrs:{title:e.$t("createDatabasePage.qita-canshu-peizhi")}})],1),a("el-row",[a("el-col",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active===0"}]},[a("el-form",{ref:"createDbForm",attrs:{model:e.createDbForm,"label-width":"160px",rules:e.createDbFormRules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("dbList.shujuku-leixing"),prop:"instance_type"}},[a("el-radio",{attrs:{label:"physical",value:"physical"},model:{value:e.createDbForm.instance_type,callback:function(t){e.$set(e.createDbForm,"instance_type",t)},expression:"createDbForm.instance_type"}},[e._v(e._s(e.$t("createDatabasePage.duli-leixing"))+" ")])],1)],1),e._l(e.initCreateOption,(function(t){return a("div",{key:t.name},[a("el-col",{attrs:{span:t.span}},[a("el-form-item",{attrs:{label:t.cname,prop:t.name}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("createDatabasePage.qingxuanze-neirong",[t.cname])},model:{value:e.createDbForm[t.name],callback:function(a){e.$set(e.createDbForm,t.name,a)},expression:"createDbForm[item.name]"}},e._l(t.countType,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),"wal_segsize"===t.name?a("el-col",{staticClass:"wal_segsize-warning",attrs:{span:6}},[a("span",{staticClass:"wal_segsize-warning_words",attrs:{title:e.$t("createDatabasePage.cicanshu-zhizhichi-m")}},[e._v(" "+e._s(e.$t("createDatabasePage.cicanshu-zhizhichi-m"))+" ")])]):e._e()],1)})),a("el-col",{attrs:{span:12}},[a("el-form-item",{class:{"is-error":e.isValidateName_create},attrs:{label:e.$t("dbList.shujuku-mingcheng"),prop:"instance_name"}},[a("div",{staticClass:"demo-input-suffix"},[a("el-input",{attrs:{placeholder:e.$t("defineDatabasePage.qingshuru-shujujku-mingcheng")},on:{change:function(t){return e.validateNameFn(e.createDbForm.instance_name,"create")}},model:{value:e.createDbForm.instance_name,callback:function(t){e.$set(e.createDbForm,"instance_name",t)},expression:"createDbForm.instance_name"}},[e.isValidateName_create?a("i",{staticClass:"red el-input__icon el-icon-error",staticStyle:{"font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"}):e._e()])],1),e.isValidateName_create?a("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.$t("defineDatabasePage.yibei-shiyong-message")))]):e._e()])],1)],2),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("dbList.suozai-zhuji"),prop:"host"}},[a("el-select",{staticStyle:{width:"100%",float:"left"},attrs:{filterable:"",placeholder:e.$t("defineDatabasePage.qingxuanze-shujiku-message")},on:{change:e.getResource},model:{value:e.createDbForm.host,callback:function(t){e.$set(e.createDbForm,"host",t)},expression:"createDbForm.host"}},e._l(e.curHostOptions,(function(t){return a("el-option",{key:t.hid,attrs:{label:t.ip,value:t.ip,disabled:1!==t.state||t.mem_size<64}},[a("el-tooltip",{staticClass:"item",attrs:{placement:"top",disabled:1===t.state&&t.mem_size>=64,effect:"dark",content:e._f("filterContent")(t.state,e.language)}},[a("div",{staticStyle:{overlow:"hiedden"}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.ip))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.hostname))])])])],1)})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$t("createDatabasePage.shujuku-ruanjian"),prop:"pg_bin_path"}},[a("el-select",{staticStyle:{width:"100%",float:"left"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:e.$t("createDatabasePage.qingxuanze-shujuku-ruanjian")},model:{value:e.createDbForm.pg_bin_path,callback:function(t){e.$set(e.createDbForm,"pg_bin_path",t)},expression:"createDbForm.pg_bin_path"}},e._l(e.pg_bin_path_list,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":1e3,placement:"top",effect:"dark",content:e.$t("createStandbyPage.shujuku-ruanjian-lujing")}},[a("div",{staticStyle:{overlow:"hiedden"}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t))])])])],1)})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:e.$t("licManager.ban-ben"),"label-width":"60px",prop:"version"}},[a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_version,expression:"loading_version"}],staticStyle:{width:"100%",float:"left"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)",disabled:""},model:{value:e.createDbForm.version,callback:function(t){e.$set(e.createDbForm,"version",t)},expression:"createDbForm.version"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("defineDatabasePage.shuju-duankou"),prop:"port"}},[a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_port,expression:"loading_port"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)",placeholder:e.$t("defineDatabasePage.shuju-duankou-placeholder")},model:{value:e.createDbForm.port,callback:function(t){e.$set(e.createDbForm,"port",e._n(t))},expression:"createDbForm.port"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("defineDatabasePage.shuju-mulu"),prop:"pgdata"}},[a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_pgdata,expression:"loading_pgdata"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)",placeholder:e.$t("defineDatabasePage.shuju-mulu-placeholder")},model:{value:e.createDbForm.pgdata,callback:function(t){e.$set(e.createDbForm,"pgdata",t)},expression:"createDbForm.pgdata"}})],1)],1)],1),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingOsInfo,expression:"loadingOsInfo"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)"}},["docker"===e.createDbForm.instance_type?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createDatabasePage.CPU-heshu"),prop:"cpu"}},[a("el-slider",{attrs:{"show-input":"",min:1,max:e.cupMemMax},model:{value:e.createDbForm.cpu,callback:function(t){e.$set(e.createDbForm,"cpu",e._n(t))},expression:"createDbForm.cpu"}})],1)],1):e._e(),"docker"!==e.createDbForm.instance_type?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createDatabasePage.caozuo-xitong-yonghu"),prop:"os_user"}},[a("el-input",{attrs:{placeholder:e.pgUser},model:{value:e.createDbForm.os_user,callback:function(t){e.$set(e.createDbForm,"os_user",t)},expression:"createDbForm.os_user"}})],1)],1):e._e(),"docker"!==e.createDbForm.instance_type?a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:e.$t("createDatabasePage.chuangjian-caozuoxitong-yonghu"),prop:"create_os_user"}},[a("el-switch",{attrs:{disabled:""},model:{value:e.createDbForm.create_os_user,callback:function(t){e.$set(e.createDbForm,"create_os_user",t)},expression:"createDbForm.create_os_user"}})],1)],1):e._e(),"docker"!==e.createDbForm.instance_type?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$t("createDatabasePage.caozuoxitong-yonghu-UID"),prop:"os_uid"}},[a("el-input",{attrs:{placeholder:e.$t("createDatabasePage.shuru-yonghu-UID"),disabled:e.os_uid_disabled},model:{value:e.createDbForm.os_uid,callback:function(t){e.$set(e.createDbForm,"os_uid",e._n(t))},expression:"createDbForm.os_uid"}})],1)],1):e._e()],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("defineDatabasePage.DB-zhongde-yonghu"),prop:"db_user"}},[a("el-input",{attrs:{placeholder:e.pgUser},model:{value:e.createDbForm.db_user,callback:function(t){e.$set(e.createDbForm,"db_user",t)},expression:"createDbForm.db_user"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("defineDatabasePage.DB-zhongde-mima"),prop:"db_pass"}},[a("el-input",{attrs:{autocomplete:"new-password",placeholder:e.$t("defineDatabasePage.DB-zhongde-mima-placeholder"),"show-password":""},model:{value:e.createDbForm.db_pass,callback:function(t){e.$set(e.createDbForm,"db_pass",t)},expression:"createDbForm.db_pass"}})],1)],1)],1)],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.active>=1,expression:"active>=1"}]},[a("el-form",{ref:"createDBconfigForm",staticStyle:{"overflow-y":"auto","max-height":"480px",width:"110%","min-width":"1120px"},attrs:{model:e.createDBconfigForm,"label-width":"254px",rules:e.createDBconfigFormRules}},[a("el-row",e._l(e.createDBconfigFormList,(function(t,i){return a("el-col",{key:i,attrs:{span:10}},[1==t.setting_type?a("el-form-item",{attrs:{label:t.setting_name,prop:t.setting_name}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":1e3,effect:"dark",content:t.notes,placement:"top-end"}},[a("el-input",{attrs:{placeholder:e.$t("createDatabasePage.qingshuru-neirong")},model:{value:e.createDBconfigForm[e.createDBconfigFormList[i].setting_name],callback:function(t){e.$set(e.createDBconfigForm,e.createDBconfigFormList[i].setting_name,t)},expression:"createDBconfigForm[createDBconfigFormList[index].setting_name]"}})],1)],1):e._e(),2==t.setting_type?a("el-form-item",{attrs:{label:t.setting_name,prop:t.setting_name}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":1e3,effect:"dark",content:t.notes,placement:"top-end"}},[a("el-select",{staticStyle:{width:"100%",float:"left"},attrs:{placeholder:e.$t("createDatabasePage.qing-xuan-ze")},model:{value:e.createDBconfigForm[e.createDBconfigFormList[i].setting_name],callback:function(t){e.$set(e.createDBconfigForm,e.createDBconfigFormList[i].setting_name,t)},expression:"createDBconfigForm[createDBconfigFormList[index].setting_name]"}},[a("el-option",{attrs:{label:"off",value:"off"}}),a("el-option",{attrs:{label:"on",value:"on"}})],1)],1)],1):e._e(),3==t.setting_type?a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:t.setting_name,prop:t.setting_name}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":1e3,disabled:!t.notes,effect:"dark",content:t.notes,placement:"top-end"}},[a("el-input",{staticStyle:{width:"70%",float:"left"},attrs:{placeholder:e.$t("createDatabasePage.qingshuru-neirong")},model:{value:e.createDBconfigForm[e.createDBconfigFormList[i].setting_name].val,callback:function(t){e.$set(e.createDBconfigForm[e.createDBconfigFormList[i].setting_name],"val",t)},expression:"createDBconfigForm[createDBconfigFormList[index].setting_name].val"}})],1),a("el-select",{staticStyle:{width:"30%",float:"left"},attrs:{placeholder:e.$t("createDatabasePage.qing-xuan-ze")},on:{change:function(a){return e.SelectChange(t.setting_name)}},model:{value:e.createDBconfigForm[e.createDBconfigFormList[i].setting_name].unit,callback:function(t){e.$set(e.createDBconfigForm[e.createDBconfigFormList[i].setting_name],"unit",t)},expression:"createDBconfigForm[createDBconfigFormList[index].setting_name].unit"}},e._l(e.byteUnitDict,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1)],1):e._e(),4==t.setting_type?a("el-form-item",{staticStyle:{clear:"both"},attrs:{label:t.setting_name,prop:t.setting_name}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":1e3,disabled:!t.notes,effect:"dark",content:t.notes,placement:"top-end"}},[a("el-input",{staticStyle:{width:"70%",float:"left"},attrs:{placeholder:e.$t("createDatabasePage.qingshuru-neirong")},model:{value:e.createDBconfigForm[e.createDBconfigFormList[i].setting_name].val,callback:function(t){e.$set(e.createDBconfigForm[e.createDBconfigFormList[i].setting_name],"val",t)},expression:"createDBconfigForm[createDBconfigFormList[index].setting_name].val"}})],1),a("el-select",{staticStyle:{width:"30%",float:"left"},attrs:{placeholder:e.$t("createDatabasePage.qing-xuan-ze")},on:{change:function(a){return e.SelectChange(t.setting_name)}},model:{value:e.createDBconfigForm[e.createDBconfigFormList[i].setting_name].unit,callback:function(t){e.$set(e.createDBconfigForm[e.createDBconfigFormList[i].setting_name],"unit",t)},expression:"createDBconfigForm[createDBconfigFormList[index].setting_name].unit"}},e._l(e.timeUnitDict,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1)],1):e._e(),5==t.setting_type?a("el-form-item",{attrs:{label:t.setting_name,prop:t.setting_name}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":1e3,disabled:!t.notes,effect:"dark",content:t.notes,placement:"top-end"}},[a("el-select",{staticStyle:{width:"100%",float:"left"},attrs:{placeholder:e.$t("createDatabasePage.qing-xuan-ze")},model:{value:e.createDBconfigForm[e.createDBconfigFormList[i].setting_name],callback:function(t){e.$set(e.createDBconfigForm,e.createDBconfigFormList[i].setting_name,t)},expression:"createDBconfigForm[createDBconfigFormList[index].setting_name]"}},e._l(t.enumvals,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1):e._e(),6==t.setting_type?a("el-form-item",{attrs:{label:t.setting_name,prop:t.setting_name}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":1e3,disabled:!t.notes,effect:"dark",content:t.notes,placement:"top-end"}},[a("el-input",{attrs:{placeholder:e.$t("createDatabasePage.qingshuru-neirong")},model:{value:e.createDBconfigForm[e.createDBconfigFormList[i].setting_name],callback:function(t){e.$set(e.createDBconfigForm,e.createDBconfigFormList[i].setting_name,t)},expression:"createDBconfigForm[createDBconfigFormList[index].setting_name]"}})],1)],1):e._e()],1)})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{float:"right","margin-top":"10px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){return e.closeDiaLog(t)}}},[e._v(e._s(e.$t("index.qu-xiao")))]),e.active>=1?a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.lastfun}},[e._v(e._s(e.$t("createDatabasePage.shang-yi-bu")))]):e._e(),e.active<3?a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{disabled:e.iscanpush},on:{click:e.nextfun}},[e._v(e._s(e.$t("createDatabasePage.xia-yi-bu"))+" ")]):e._e(),3==e.active?[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.createDbSubmit}},[e._v(e._s(e.$t("defineDatabasePage.ti-jiao")))])]:e._e()],2)],1)}),[],!1,g,"4fb8b52c",null,null);function g(e){for(let t in c)this[t]=c[t]}var m=function(){return u.exports}();export{m as default};
