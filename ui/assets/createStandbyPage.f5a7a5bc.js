import{A as e}from"./api_dbManage.40e399a2.js";import{n as t,D as a}from"./index.7fc66993.js";import{c as s,a as r,b as i}from"./verificationRules.bef90446.js";import"./index.dfdb83b1.js";import"./vendor.194c4086.js";import"./bus.d56574c1.js";const n={};var o=t({name:"baseInfo",data(){return{language:"",loading_pgdata:!1,loading_port:!1,savePort:"",master_db:{},src_db:{},pg_bin_path_list:[],loadingOsInfo:!1,loading_version:!1,isValidateName_standby:"",os_uid_disabled:!1,standbyDbFormVisible:!1,standbyDbForm:{tblspc_dir:[],host:"",instance_name:"",pg_user:"postres",os_user:"pg1922",port:1922,pgdata:"/data/pg1922"},standbyDbFormRules:{instance_type:[{required:!0,trigger:"change"}],os_user:[{required:!0,message:this.$t("createDatabasePage.yunxing-shujuku-yonghu-message"),trigger:"blur"}],os_uid:[{required:!0,message:this.$t("createDatabasePage.yunxing-yunhu-UID-message"),trigger:"blur"},{type:"number",message:this.$t("createDatabasePage.UID-bixuwei-zhuzizhi")}],pg_bin_path:[{required:!0,message:this.$t("createDatabasePage.bixu-xuanze-youxiao-raunjianmulu"),trigger:"blur"}],sync:[{required:!0,trigger:"change"}],instance_name:[{message:this.$t("defineDatabasePage.qingshuru-shujujku-mingcheng"),trigger:"blur"}],host:[{required:!0,message:this.$t("createDatabasePage.qingxuanze-zhuji-IP"),trigger:"change"}],pgdata:[{required:!0,message:this.$t("defineDatabasePage.qingshuru-shuju-mulu"),trigger:"blur"},{required:!0,validator:s,trigger:"blur"},{required:!0,validator:(t,a,s)=>{if(""===a)s(new Error(this.$t("verificationRules.qingshuru-shuji-mulu")));else{if(!this.standbyDbForm.host)return s(this.$t("createDatabasePage.xuanzezhuji-kechakan-message"));{let t={host:this.standbyDbForm.host,pgdata:a};this.loading_pgdata=!0,e.checkTheDirIsEmpty(t).then((e=>(this.loading_pgdata=!1,1==e.is_empty?s():0==e.is_empty?s(new Error(this.$t("verificationRules.gaishuju-mulu-m"))):s(new Error(e.err_msg)))),(e=>(this.loading_pgdata=!1,s(new Error(this.$t("verificationRules.jiancha-qingqiu-chucuo"))))))}}},trigger:"submit"}],old_dir:[{required:!1,validator:r,trigger:"blur"}],new_dir:[{required:!1,validator:r,trigger:"blur"}],delay:[{type:"number",message:this.$t("createStandbyPage.yanchi-bixu")}],other_param:[{required:!0,message:this.$t("createStandbyPage.qingshuru-other_param"),trigger:"blur"}],repl_user:[{required:!0,message:this.$t("createStandbyPage.qingshuru-shujuku-message"),trigger:"blur"}],repl_pass:[{required:!0,message:this.$t("createStandbyPage.qingshuru-shujuku-zhongde-message"),trigger:"blur"}],repl_ip:[{required:!0,validator:(e,t,a)=>{let s=this;if(t){let e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,r=t.split(",");for(let t=0;t<r.length;t++)if(!1===e.test(r[t]))return a(new Error(this.$t("createStandbyPage.IP-dizhi-buguifan-message")));return t==s.standbyDbForm.primary_repl_ip?a(new Error(this.$t("createStandbyPage.beiku-fuzhi-ip-message"))):a()}return a(new Error(this.$t("createStandbyPage.qingshuru-IP-dizhi")))},trigger:"blur"},{required:!0,message:this.$t("createStandbyPage.qingshuru-beiku-fuzhi-ip"),trigger:"blur"}],port:[{required:!0,message:this.$t("createDatabasePage.qingshuru-duankouhao"),trigger:"blur"},{required:!0,validator:i,trigger:"blur"},{type:"number",message:this.$t("defineDatabasePage.duankou-bixuwei-shuzizhi")},{required:!0,validator:(t,a,s)=>{if(""==this.standbyDbForm.port)return s();let r={host:this.standbyDbForm.host,port:a};this.loading_port=!0,e.checkPortIsUsed(r).then((e=>(this.loading_port=!1,0==e.err_code?0==e.is_used?s():s(new Error(this.$t("verificationRules.gaiduankou-yibei-m"))):s(new Error(e.err_msg)))),(function(e){return this.loading_port=!1,s(new Error(this.$t("verificationRules.jiancha-qingqiu-chucuo")))}))},trigger:"submit"}]},curHostOptions:[],memMax:2048,cupMemMax:32,loading:!1,databaselistDatas:[],showtype:!1,spareDataType:"standby",pgUser:""}},props:{databaseId:{required:!0},databaselistData:{required:!0},databaseInfo:{required:!0}},watch:{"standbyDbForm.host":{handler(e,t){if("undefined"!=e&&""!=e){let t=this;if(this.memMax=this.curHostOptions.find((t=>t.ip===e)).mem_size,null!=this.curHostOptions.find((t=>t.ip===e)).cpu&&"docker"==standbyDbForm.instance_type?t.cupMemMax=this.curHostOptions.find((t=>t.ip===e)).cpu:t.cupMemMax=32,this.memMax<64)return this.$message({type:"error",message:this.$t("createDatabasePage.gaizhuji-shengyu-message")})}}},"standbyDbForm.cpu":{handler(e,t){if(this.curHostOptions.find((t=>t.cpu===e))&&(this.memMax=this.curHostOptions.find((t=>t.ip===e)).mem_size),this.memMax<64)return this.$message({type:"error",message:this.$t("createDatabasePage.gaizhuji-shengyu-message")})}}},mounted(){const t=this;t.language=localStorage.getItem("language_clup"),this.standbyDbFormVisible=!1,e.getPgFamilyInfo().then((function(e){t.pgUser=e.pg_family_user,t.standbyDbDialog(t.databaseId),t.databaselistDatas=t.databaselistData,t.standbyDbFormRules.host.push({required:!0,validator:t.validHost,trigger:"change"}),t.standbyDbFormRules.os_user.push({required:!0,validator:t.validOsUser,trigger:"blur"}),t.standbyDbFormRules.os_uid.push({required:!0,validator:t.validOsUid,trigger:"blur"}),t.standbyDbFormRules.pg_bin_path.push({required:!0,validator:t.validPgBinPath,trigger:"change"})}))},methods:{validOsUser(t,a,s){const r=this;if(""==r.standbyDbForm.os_user)return void s();let i={host:r.standbyDbForm.host,user:a};r.loadingOsInfo=!0,e.checkOsUserExists(i).then((e=>{r.loadingOsInfo=!1,0==e.err_code?0==e.exists?(r.os_uid_disabled=!1,r.standbyDbForm.create_os_user=!0,r.standbyDbForm.os_uid&&r.$refs.standbyDbForm.validateField("os_uid"),s()):(r.os_uid_disabled=!0,r.standbyDbForm.create_os_user=!1,r.$refs.standbyDbForm.clearValidate("os_uid"),r.$set(r.standbyDbForm,"os_uid",e.exists),s()):s(new Error(e.err_msg))}),(function(e){s(new Error(e)),r.loadingOsInfo=!1}))},validHost(t,a,s){const r=this;if(""==r.standbyDbForm.host)return void s();let i={host:r.standbyDbForm.host};r.loading_pg_bin_path_list=!0,e.getPgBinPathList(i).then((e=>{r.loading_pg_bin_path_list=!1,r.pg_bin_path_list=e,s()}),(function(e){s(new Error(e)),r.loading_pg_bin_path_list=!1}))},validOsUid(t,a,s){const r=this;if(""==r.standbyDbForm.os_uid)return void s();if(r.os_uid_disabled)return void s();let i={host:r.standbyDbForm.host,os_uid:a};r.loadingOsInfo=!0,e.checkOsUidExists(i).then((e=>{r.loadingOsInfo=!1,0==e.err_code?0==e.exists||r.os_uid_disabled?s():s(new Error(this.$t("createDatabasePage.yonghu-uid")+a+this.$t("createDatabasePage.yicunzai"))):s(new Error(e.err_msg))}),(function(e){s(new Error(e)),r.loadingOsInfo=!1}))},validPgBinPath(t,a,s){const r=this;if(""==r.standbyDbForm.host)return void s();let i={host:r.standbyDbForm.host,pg_bin_path:r.standbyDbForm.pg_bin_path};r.loading_version=!0,e.getPgBinVersion(i).then((e=>{0==e.err_code?(this.$set(r.standbyDbForm,"version",e.version),s()):s(new Error(e.err_msg)),r.loading_version=!1}),(function(e){r.loading_version=!1,s(new Error(e))}))},addTableSpace(){this.standbyDbForm.tblspc_dir.push({old_dir:"",new_dir:"",check:!0})},changeStandByIP(){this.standbyDbForm.standby_repl_ip=this.standbyDbForm.host,this.standbyDbForm.pgdata&&this.$refs.standbyDbForm.validateField("pgdata")},delTblSpc(e){this.standbyDbForm.tblspc_dir.splice(e,1)},validateNameFn(e,t){this.databaselistDatas.find((t=>t.instance_name===e))?this["isValidateName_"+t]=!0:this["isValidateName_"+t]=!1},closeDiaLog:function(){this.$emit("close-form")},standbyDbDialog:function(t){const s=this;this.standbyDbFormVisible=!1;let r={db_id:t};s.loading=!0,s.master_db=s.databaseInfo,e.getDBHostList(r).then((function(i){if(0===i.length)return s.loading=!1,s.$message({type:"warning",message:s.$t("createStreamReplicationCluster.shujuku-suozai-m")});s.curHostOptions=i;let n=i.find((e=>e.mem_size>=64&&1==e.state));null==n&&(n=s.curHostOptions[0]),s.memMax=n.mem_size,null!=n.cpu&&(s.cupMemMax=n.cpu);let o="";for(let e in s.curHostOptions)if(0===s.curHostOptions[e].is_using&&s.curHostOptions[e].mem_size>=64&&1===s.curHostOptions[e].state){o=s.curHostOptions[e].ip;break}let l=[];for(let e in s.master_db.tblspc_dir){let t={old_dir:s.master_db.tblspc_dir[e].old_dir,new_dir:s.master_db.tblspc_dir[e].new_dir,check:!1};l.push(t)}if(s.standbyDbForm={up_db_id:t,instance_type:"physical",sync:"1",tblspc_dir:l,host:o,other_param:"-P -Xs",db_user:s.pgUser,repl_user:s.master_db.repl_user,repl_pass:a.FromDbText(s.master_db.repl_pass),db_id:s.master_db.db_id,shared_buffers:s.master_db.mem_size},s.master_db.cluster_id>0?(s.standbyDbForm.port=s.master_db.port,s.savePort=s.master_db.port):s.master_db.port&&(s.savePort=s.master_db.port),0==s.master_db.tblspc_dir.length&&s.standbyDbForm.tblspc_dir.push({old_dir:"",new_dir:"",check:!0}),null!=s.standbyDbForm.mem_size&&null!=s.standbyDbForm.mem_size||(s.standbyDbForm.mem_size=64),s.memMax<64)return s.$message({type:"error",message:s.$t("createDatabasePage.gaizhuji-shengyu-message")});11==s.databaseInfo.db_type&&11==s.databaseInfo.cluster_type&&(s.showtype=!0,s.standbyDbForm.other_param="-X stream --progress --write-recovery-conf -v"),e.getDbInfo(r).then((function(e){s.loading=!1,s.src_db=e,s.standbyDbForm.primary_repl_ip=s.src_db.repl_ip}),(function(e){s.loading=!1}))}),(function(e){s.loading=!1}))},buildStandbyDbSubmit:function(){const e=this;!0!==e.isValidateName_standby?this.$refs.standbyDbForm.validate((t=>{t&&e.submitFunc({})})):e.$message({type:"error",message:this.$t("defineDatabasePage.mingcheng-yibei-shiyong")})},submitFunc(t){const s=this;s.$emit("refresh-form");let r=JSON.parse(JSON.stringify(s.standbyDbForm));if(r.tblspc_dir.length>1){for(let e=0;e<r.tblspc_dir.length;e++)if(""==r.tblspc_dir[e].old_dir&&""==r.tblspc_dir[e].new_dir)r.tblspc_dir.splice(e,1),e--;else if(""!=r.tblspc_dir[e].old_dir&&""==r.tblspc_dir[e].new_dir||""==r.tblspc_dir[e].old_dir&&""!=r.tblspc_dir[e].new_dir)return void s.$message({type:"error",message:this.$t("createStandbyPage.biaokongjian-xinjiu-message")})}else if(1==r.tblspc_dir.length)if(""==r.tblspc_dir[0].old_dir&&""==r.tblspc_dir[0].new_dir)r.tblspc_dir.splice(0,1);else if(""!=r.tblspc_dir[0].old_dir&&""==r.tblspc_dir[0].new_dir||""==r.tblspc_dir[0].old_dir&&""!=r.tblspc_dir[0].new_dir)return void s.$message({type:"error",message:this.$t("createStandbyPage.biaokongjian-xinjiu-message")});s.loading=!0,r.repl_pass=a.ToDbText(r.repl_pass),r=Object.assign({},r,t),s.showtype?(delete r.tblspc_dir,"standby"==s.spareDataType?e.buildPolarStandby(r).then((function(e){s.standbyDbFormVisible=!1,s.$emit("close-form"),console.log(e),e.task_id&&s.$emit("open-task",e.task_id)}),(function(e){s.loading=!1,s.$emit("down-form")})):e.buildPolarReader(r).then((function(e){s.standbyDbFormVisible=!1,s.$emit("close-form"),console.log(e),e.task_id&&s.$emit("open-task",e.task_id)}),(function(e){s.loading=!1,s.$emit("down-form")}))):(11===s.master_db.db_type&&delete r.tblspc_dir,r.primary_port=s.master_db.port,e.buildStandby(r).then((function(e){s.standbyDbFormVisible=!1,s.$emit("close-form"),console.log(e),e.task_id&&s.$emit("open-task",e.task_id)}),(function(e){s.loading=!1,s.$emit("down-form")})))}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{overflow:"hidden"},attrs:{"element-loading-text":e.standbyDbFormVisible?e.$t("createStandbyPage.zhengzai-chuangjianzhong"):e.$t("Public.ping-ming-jia-zai-zhong")}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"standbyDbForm",attrs:{model:e.standbyDbForm,"label-width":"160px",rules:e.standbyDbFormRules}},[a("el-divider",[e._v(e._s(e.$t("createStandbyPage.yuanku-xinxi")))]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{probe:"src_repl_ip",label:e.$t("createStandbyPage.yunku-fuzhi-ip")}},[a("el-input",{attrs:{disabled:""},model:{value:e.src_db.repl_ip,callback:function(t){e.$set(e.src_db,"repl_ip",t)},expression:"src_db.repl_ip"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createStandbyPage.yuanku-duankou"),prop:"src_port"}},[a("el-input",{attrs:{disabled:""},model:{value:e.src_db.port,callback:function(t){e.$set(e.src_db,"port",e._n(t))},expression:"src_db.port"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createDatabasePage.shujuku-ruanjian"),prop:"src_pg_bin_path"}},[a("el-input",{attrs:{disabled:""},model:{value:e.src_db.pg_bin_path,callback:function(t){e.$set(e.src_db,"pg_bin_path",t)},expression:"src_db.pg_bin_path"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("licManager.ban-ben"),prop:"src_version"}},[a("el-input",{attrs:{disabled:""},model:{value:e.src_db.version,callback:function(t){e.$set(e.src_db,"version",t)},expression:"src_db.version"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[e.master_db.repl_user?a("el-form-item",{attrs:{label:e.$t("createStandbyPage.liufuzhi-yonghu")}},[a("el-input",{attrs:{placeholder:e.master_db.repl_user,disabled:""},model:{value:e.standbyDbForm.repl_user,callback:function(t){e.$set(e.standbyDbForm,"repl_user",t)},expression:"standbyDbForm.repl_user"}})],1):a("el-form-item",{attrs:{label:e.$t("createStandbyPage.liufuzhi-yonghu"),prop:"repl_user"}},[a("el-input",{attrs:{placeholder:e.$t("createStandbyPage.qingshuru-zhuku-message")},model:{value:e.standbyDbForm.repl_user,callback:function(t){e.$set(e.standbyDbForm,"repl_user",t)},expression:"standbyDbForm.repl_user"}})],1)],1),a("el-col",{attrs:{span:12}},[e.master_db.repl_pass?a("el-form-item",{attrs:{label:e.$t("createStandbyPage.liufuzhi-mima")}},[a("el-input",{attrs:{"show-password":"",placeholder:e.master_db.repl_pass,disabled:""},model:{value:e.standbyDbForm.repl_pass,callback:function(t){e.$set(e.standbyDbForm,"repl_pass",t)},expression:"standbyDbForm.repl_pass"}})],1):a("el-form-item",{attrs:{label:e.$t("createStandbyPage.liufuzhi-mima"),prop:"repl_pass"}},[a("el-input",{attrs:{"show-password":"",placeholder:e.$t("createStandbyPage.qingshuru-zhuku-mima-message")},model:{value:e.standbyDbForm.repl_pass,callback:function(t){e.$set(e.standbyDbForm,"repl_pass",t)},expression:"standbyDbForm.repl_pass"}})],1)],1)],1),a("el-divider",[e._v(e._s(e.$t("createStandbyPage.qingshuru-beiku-xinxi")))]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("dbList.shujuku-leixing"),prop:"instance_type"}},[a("el-radio",{attrs:{label:"physical",value:"physical"},model:{value:e.standbyDbForm.instance_type,callback:function(t){e.$set(e.standbyDbForm,"instance_type",t)},expression:"standbyDbForm.instance_type"}},[e._v(e._s(e.$t("createDatabasePage.duli-leixing"))+" ")])],1)],1),e.showtype?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createStandbyPage.beiku-leixing")}},[a("el-radio",{attrs:{label:"standby",value:"standby"},model:{value:e.spareDataType,callback:function(t){e.spareDataType=t},expression:"spareDataType"}},[e._v("standby ")]),a("el-radio",{attrs:{label:"reader",value:"reader"},model:{value:e.spareDataType,callback:function(t){e.spareDataType=t},expression:"spareDataType"}},[e._v("reader ")])],1)],1):e._e()],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createStandbyPage.xuanze-beiku-zhuji"),prop:"host"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{filterable:"",placeholder:e.$t("createStandbyPage.qingxuanze-beiku-zhuji")},on:{change:e.changeStandByIP},model:{value:e.standbyDbForm.host,callback:function(t){e.$set(e.standbyDbForm,"host",t)},expression:"standbyDbForm.host"}},e._l(e.curHostOptions,(function(t){return a("el-option",{key:t.hid,attrs:{label:t.ip,value:t.ip,disabled:1!==t.state||1===t.is_using||t.ip==e.standbyDbForm.primary_repl_ip||t.mem_size<64}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.ip))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.hostname))])])})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{class:{"is-error":e.isValidateName_standby},attrs:{label:e.$t("createStandbyPage.shuru-beiku-migncheng"),prop:"instance_name"}},[a("div",{staticClass:"demo-input-suffix"},[a("el-tooltip",{staticClass:"item",attrs:{disabled:"en"!=e.language,"open-delay":800,effect:"dark",content:e.$t("createStandbyPage.qingshuru-beiku-shuju-message"),placement:"top-start"}},[a("el-input",{attrs:{placeholder:e.$t("createStandbyPage.qingshuru-beiku-shuju-message")},on:{change:function(t){return e.validateNameFn(e.standbyDbForm.instance_name,"standby")}},model:{value:e.standbyDbForm.instance_name,callback:function(t){e.$set(e.standbyDbForm,"instance_name",t)},expression:"standbyDbForm.instance_name"}},[e.isValidateName_standby?a("i",{staticClass:"red el-input__icon el-icon-error",staticStyle:{"font-size":"14px"},attrs:{slot:"suffix"},slot:"suffix"}):e._e()])],1)],1),e.isValidateName_standby?a("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.$t("defineDatabasePage.yibei-shiyong-message")))]):e._e()])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createStandbyPage.beiku-fuzhi-ip"),prop:"repl_ip"}},[a("el-input",{attrs:{placeholder:e.$t("createStandbyPage.qingshuru-beiku-fuzhi-ip")},model:{value:e.standbyDbForm.repl_ip,callback:function(t){e.$set(e.standbyDbForm,"repl_ip",t)},expression:"standbyDbForm.repl_ip"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_port,expression:"loading_port"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)",label:e.$t("createStandbyPage.beiku-duankou"),prop:"port"}},[a("el-input",{attrs:{placeholder:e.$t("defineDatabasePage.qingshuru-duankou"),disabled:e.master_db.cluster_id>0},model:{value:e.standbyDbForm.port,callback:function(t){e.$set(e.standbyDbForm,"port",e._n(t))},expression:"standbyDbForm.port"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$t("createDatabasePage.shujuku-ruanjian"),prop:"pg_bin_path"}},[a("el-select",{staticStyle:{width:"100%",float:"left"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:e.$t("createDatabasePage.qingxuanze-shujuku-ruanjian")},model:{value:e.standbyDbForm.pg_bin_path,callback:function(t){e.$set(e.standbyDbForm,"pg_bin_path",t)},expression:"standbyDbForm.pg_bin_path"}},e._l(e.pg_bin_path_list,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":1e3,placement:"top",effect:"dark",content:e.$t("createStandbyPage.shujuku-ruanjian-lujing")}},[a("div",{staticStyle:{overlow:"hiedden"}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t))])])])],1)})),1)],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:e.$t("licManager.ban-ben"),"label-width":"60px",prop:"version"}},[a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_version,expression:"loading_version"}],staticStyle:{width:"100%",float:"left"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)",disabled:""},model:{value:e.standbyDbForm.version,callback:function(t){e.$set(e.standbyDbForm,"version",t)},expression:"standbyDbForm.version"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_pgdata,expression:"loading_pgdata"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)",label:e.$t("defineDatabasePage.shuju-mulu"),prop:"pgdata"}},[a("el-input",{attrs:{placeholder:e.$t("defineDatabasePage.shuju-mulu-placeholder")},model:{value:e.standbyDbForm.pgdata,callback:function(t){e.$set(e.standbyDbForm,"pgdata",t)},expression:"standbyDbForm.pgdata"}})],1)],1)],1),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingOsInfo,expression:"loadingOsInfo"}],attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0)"}},["docker"!==e.standbyDbForm.instance_type?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createDatabasePage.caozuo-xitong-yonghu"),prop:"os_user"}},[a("el-input",{attrs:{placeholder:e.$t("createDatabasePage.yunxing-shujuku-yonghu-message")},model:{value:e.standbyDbForm.os_user,callback:function(t){e.$set(e.standbyDbForm,"os_user",t)},expression:"standbyDbForm.os_user"}})],1)],1):e._e(),"docker"!==e.standbyDbForm.instance_type?a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:e.$t("createDatabasePage.chuangjian-caozuoxitong-yonghu"),prop:"create_os_user"}},[a("el-switch",{attrs:{disabled:""},model:{value:e.standbyDbForm.create_os_user,callback:function(t){e.$set(e.standbyDbForm,"create_os_user",t)},expression:"standbyDbForm.create_os_user"}})],1)],1):e._e(),"docker"!==e.standbyDbForm.instance_type?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.$t("createDatabasePage.caozuoxitong-yonghu-UID"),prop:"os_uid"}},[a("el-input",{attrs:{placeholder:e.$t("createDatabasePage.shuru-yonghu-UID"),disabled:e.os_uid_disabled},model:{value:e.standbyDbForm.os_uid,callback:function(t){e.$set(e.standbyDbForm,"os_uid",e._n(t))},expression:"standbyDbForm.os_uid"}})],1)],1):e._e()],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createStandbyPage.yanchi-shijian"),prop:"delay"}},[a("el-input",{attrs:{placeholder:e.$t("createStandbyPage.yanchi-beiku-message")},model:{value:e.standbyDbForm.delay,callback:function(t){e.$set(e.standbyDbForm,"delay",e._n(t))},expression:"standbyDbForm.delay"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"other_param",prop:"other_param"}},[a("el-input",{attrs:{placeholder:e.$t("createStandbyPage.qingshuru-other_param")},model:{value:e.standbyDbForm.other_param,callback:function(t){e.$set(e.standbyDbForm,"other_param",e._n(t))},expression:"standbyDbForm.other_param"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},["docker"===e.standbyDbForm.instance_type?a("el-form-item",{attrs:{label:e.$t("createDatabasePage.CPU-heshu"),prop:"cpu"}},[a("el-slider",{attrs:{"show-input":"",min:1,max:e.cupMemMax},model:{value:e.standbyDbForm.cpu,callback:function(t){e.$set(e.standbyDbForm,"cpu",e._n(t))},expression:"standbyDbForm.cpu"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},["docker"===e.standbyDbForm.instance_type?a("el-form-item",{attrs:{label:e.$t("createStandbyPage.neicun-daxi"),prop:"shared_buffers"}},[a("el-slider",{attrs:{"aria-placeholder":e.master_db.shared_buffers,"show-input":"",min:64,max:e.memMax,disabled:null!=e.master_db.shared_buffers&&null!=e.master_db.shared_buffers||e.memMax<64},model:{value:e.standbyDbForm.shared_buffers,callback:function(t){e.$set(e.standbyDbForm,"shared_buffers",e._n(t))},expression:"standbyDbForm.shared_buffers"}},[e._v(" >")])],1):e._e()],1)],1),11!==e.master_db.db_type?a("el-row",{staticStyle:{color:"#606266","font-weight":"700","margin-bottom":"10px"}},[a("el-col",{staticStyle:{"padding-left":"40px","font-size":"12px"},attrs:{span:24}},[e._v(" "+e._s(e.$t("createStandbyPage.biaokongjian-mulu-yingshe"))+" ")]),e._l(e.standbyDbForm.tblspc_dir,(function(t,s){return a("el-row",{key:s},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createStandbyPage.jiu-mu-lu"),prop:"tblspc_dir."+s+".old_dir",rules:e.standbyDbFormRules.old_dir}},[a("el-input",{attrs:{disabled:"",placeholder:e.$t("createStandbyPage.shuru-jinbiao-message")},model:{value:t.old_dir,callback:function(a){e.$set(t,"old_dir",a)},expression:"item.old_dir"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("createStandbyPage.xin-mu-lu"),prop:"tblspc_dir."+s+".new_dir",rules:e.standbyDbFormRules.new_dir}},[a("el-input",{attrs:{disabled:""===t.old_dir,placeholder:e.$t("createStandbyPage.qingshu-xinbiao-message")},model:{value:t.new_dir,callback:function(a){e.$set(t,"new_dir",a)},expression:"item.new_dir"}})],1)],1)],1)}))],2):e._e()],1),a("div",{staticClass:"dialog-footer",staticStyle:{float:"right","marign-top":"10px"}},[a("el-button",{nativeOn:{click:function(t){return e.closeDiaLog(t)}}},[e._v(e._s(e.$t("index.qu-xiao")))]),a("el-button",{attrs:{type:"primary",disabled:e.memMax<64&&1==e.master_db.table_space},on:{click:e.buildStandbyDbSubmit}},[e._v(e._s(e.$t("defineDatabasePage.ti-jiao")))])],1)],1)],1)}),[],!1,l,"91b6d714",null,null);function l(e){for(let t in n)this[t]=n[t]}var d=function(){return o.exports}();export{d as default};
