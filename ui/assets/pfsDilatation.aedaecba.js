import{A as t}from"./api_dbManage.0ed831fd.js";import{s as a}from"./staticTools.84335405.js";import{n as i}from"./index.8ae6cd07.js";import"./index.dfdb83b1.js";import"./vendor.194c4086.js";import"./bus.d56574c1.js";const s={};var n=i({data(){return{propDatabaseData:null,pfsFormData:[{name:"pfs_disk_name",cname:this.$t("pfsDilatation.pfs-gongxiangpan-mingcheng"),span:10,readOnly:!0},{isEmptyPostition:!0,span:10},{name:"dev_size",cname:this.$t("pfsDilatation.wulipan-daxiao"),span:10,unit:"GB",readOnly:!0},{name:"current_size",cname:this.$t("pfsDilatation.pfs-gongxiangpan-dangqian-daxiao"),unit:"GB",span:10,readOnly:!0},{name:"current_chunks",cname:this.$t("pfsDilatation.dangqian-chunk-shu"),span:10,readOnly:!0},{name:"max_chunks",cname:this.$t("pfsDilatation.zuida-chunk-shu"),span:10,readOnly:!0}],pfsDilatationForm:{},pfsDilatationRules:{},toolTips:[this.$t("pfsDilatation.one-toolTip"),this.$t("pfsDilatation.two-toolTip"),this.$t("pfsDilatation.three-toolTip"),this.$t("pfsDilatation.four-toolTip")],loading:!1,isSubmit:!1}},props:{databaseData:{type:Object,required:!0}},methods:{cancel(){this.$emit("close-form")},submit(){let{pfs_disk_name:i,current_chunks:s,max_chunks:n}=this.pfsDilatationForm,e={db_id:this.propDatabaseData.db_id,pfs_disk_name:i,current_chunks:s,target_chunks:n};this.loading=!0,t.pfsGrowfs(e).then((t=>{this.loading=!1,a(this.$t("pfsDilatation.tijiao-chenggong")),this.mountedRequest()}),(t=>this.loading=!1))},mountedRequest(){let a={db_id:this.propDatabaseData.db_id};this.loading=!0,t.getPFSInfo(a).then((t=>{this.pfsDilatationForm=JSON.parse(JSON.stringify(t)),this.pfsDilatationForm.current_chunks>=this.pfsDilatationForm.max_chunks?this.isSubmit=!1:this.isSubmit=!0,this.loading=!1}),(t=>this.loading=!1))}},mounted(){this.propDatabaseData=this.databaseData,this.mountedRequest()}},(function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("section",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pfsDilatation",attrs:{"element-loading-text":t.$t("Public.ping-ming-jia-zai-zhong")}},[i("el-form",{ref:"pfsDilatationForm",attrs:{"label-width":"200px",model:t.pfsDilatationForm,rules:t.pfsDilatationRules}},[i("el-row",t._l(t.pfsFormData,(function(a,s){return i("el-col",{key:s,class:{emptyClass:a.isEmptyPostition},attrs:{span:a.span}},[a.isEmptyPostition?t._e():i("el-form-item",{attrs:{label:a.cname,prop:a.name}},[i("el-input",{attrs:{disabled:!0===a.readOnly},model:{value:t.pfsDilatationForm[a.name],callback:function(i){t.$set(t.pfsDilatationForm,a.name,i)},expression:"pfsDilatationForm[item.name]"}},[a.unit?i("template",{slot:"append"},[t._v(t._s(a.unit))]):t._e()],2)],1)],1)})),1),i("el-row",{staticClass:"night_font",staticStyle:{"margin-left":"150px"}},[t._v(" "+t._s(t.$t("pfsDilatation.zhu-yi"))+" ")]),i("el-row",{staticStyle:{"margin-left":"200px"}},t._l(t.toolTips,(function(a){return i("el-col",{key:a,staticClass:"night_font",staticStyle:{"margin-bottom":"5px"},attrs:{span:24}},[i("div",[t._v(t._s(a))])])})),1)],1),i("div",{staticClass:"foot"},[i("el-button",{nativeOn:{click:function(a){return t.cancel(a)}}},[t._v(t._s(t.$t("index.qu-xiao")))]),i("el-button",{attrs:{disabled:!t.isSubmit,type:"primary"},on:{click:t.submit}},[t._v(t._s(t.$t("defineDatabasePage.ti-jiao")))])],1)],1)}),[],!1,e,"be0586e6",null,null);function e(t){for(let a in s)this[a]=s[a]}var o=function(){return n.exports}();export{o as default};
