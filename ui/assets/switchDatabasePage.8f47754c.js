import{A as a}from"./api_dbManage.0ed831fd.js";import{n as t}from"./index.8ae6cd07.js";import"./index.dfdb83b1.js";import"./vendor.194c4086.js";import"./bus.d56574c1.js";const e={};var i=t({name:"baseInfo",data:()=>({cascadedRows:[],cascadedDialogVisible:!1,currentRow:null,db_state:0,cur_db:"",dialogLoading:!1,dbdbTableRadio:"",nowdb_id:""}),props:{databaseData:{required:!0}},mounted(){this.nowdb_id=this.databaseData.db_id,this.allCascadeDbDialog(this.databaseData)},methods:{tableRowClassName:({row:a,rowIndex:t})=>t%2!=0?"warning-row":"success-row",closeDiaLog:function(){this.$emit("close-form")},allCascadeDbDialog:function(t){const e=this;let i={db_id:t.db_id};e.cur_db=t.db_id,this.dialogLoading=!0,a.getAllCascadedDb(i).then((function(a){e.dialogLoading=!1;let i=[];a.map((a=>{a.db_id!=t.up_db_id&&i.push(a)})),e.cascadedRows=i}),(function(a){e.dialogLoading=!1}))},clickChange(a){a.db_id!=this.nowdb_id?this.dbdbTableRadio=a:this.dbdbTableRadio=""},changeUpdb:function(){const t=this;if(this.dbdbTableRadio&&(this.db_state=this.dbdbTableRadio.db_state,0===this.db_state)){this.dialogLoading=!0,t.$emit("refresh-form");let e={db_id:t.cur_db,up_db_id:t.dbdbTableRadio.db_id};a.changeUpDb(e).then((function(a){t.dialogLoading=!1,t.$emit("close-form")}),(function(a){t.dialogLoading=!1,t.$emit("close-form")}))}}}},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:a.dialogLoading,expression:"dialogLoading"}],staticStyle:{overflow:"hidden"},attrs:{"element-loading-text":a.$t("Public.ping-ming-jia-zai-zhong")}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.dialogLoading,expression:"dialogLoading"}],staticStyle:{width:"100%"},attrs:{"row-class-name":a.tableRowClassName,data:a.cascadedRows,border:"","highlight-current-row":""},on:{"current-change":a.clickChange}},[e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:a.$t("switchDatabasePage.xuan-ze"),"min-width":"70"},scopedSlots:a._u([{key:"default",fn:function(t){return[t.row.db_id!=a.nowdb_id?e("el-radio",{attrs:{label:t.row},model:{value:a.dbdbTableRadio,callback:function(t){a.dbdbTableRadio=t},expression:"dbdbTableRadio"}},[e("i")]):e("label",{staticStyle:{color:"#909399"}},[a._v(a._s(a.$t("switchDatabasePage.ben-ku")))])]}}])}),e("el-table-column",{attrs:{prop:"db_id",label:a.$t("switchDatabasePage.shujuku-ID"),align:"center","min-width":"70px"}}),e("el-table-column",{attrs:{prop:"up_db_id",label:a.$t("dbList.shang-ji-ku"),align:"center","min-width":"70px"}}),e("el-table-column",{attrs:{prop:"host",label:a.$t("dashboard.zhu-ji"),align:"center","min-width":"120px"}}),e("el-table-column",{attrs:{prop:"port",label:a.$t("dashboard.duan-kou"),align:"center","min-width":"80px"}}),e("el-table-column",{attrs:{prop:"db_state",label:a.$t("dbList.zhuang-tai"),align:"left","header-align":"center","min-width":"90px"},scopedSlots:a._u([{key:"default",fn:function(t){return[0===t.row.db_state?e("i",{staticClass:"el-icon-success green"},[e("span",{staticClass:"statefont"},[a._v(" "+a._s(a.$t("dbList.yun-xing-zhong")))])]):1===t.row.db_state?e("i",{staticClass:"el-icon-info"},[e("span",{staticClass:"statefont"},[a._v(" "+a._s(a.$t("dbList.ting-zhi")))])]):-1===t.row.db_state?e("i",{staticClass:"el-icon-error red"},[e("span",{staticClass:"statefont"},[a._v(" "+a._s(a.$t("dashboard.yi-chang")))])]):a._e()]}}])})],1),e("span",{staticClass:"dialog-footer",staticStyle:{float:"right","margin-top":"10px"},attrs:{slot:"footer"},slot:"footer"},[0!==a.db_state?e("span",{staticClass:"red",staticStyle:{"margin-right":"10px"}},[a._v(a._s(a.$t("switchDatabasePage.shujuiku-message")))]):a._e(),e("el-button",{on:{click:a.closeDiaLog}},[a._v(a._s(a.$t("switchDatabasePage.qu-xiao")))]),e("el-button",{attrs:{type:"primary",disabled:!a.dbdbTableRadio},on:{click:a.changeUpdb}},[a._v(a._s(a.$t("switchDatabasePage.que-ding")))])],1)],1)}),[],!1,d,"320f9c82",null,null);function d(a){for(let t in e)this[t]=e[t]}var s=function(){return i.exports}();export{s as default};
